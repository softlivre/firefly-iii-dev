"use strict";(globalThis["webpackChunkfirefly_iii"]=globalThis["webpackChunkfirefly_iii"]||[]).push([[6317],{6317:(e,t,s)=>{s.r(t),s.d(t,{default:()=>He});var o=s(9835),n=s(6970);const a={class:"row q-mx-md"},i={class:"col-12"},r={class:"row q-ma-md"},l={class:"col-12"},u={class:"row"},d={class:"row"},c={class:"col-12"},m={class:"row q-mx-md"},p={class:"col-12"},b={class:"row"},h={class:"col-12 text-right"},g={class:"row"},f={class:"col-12 text-right"},w=(0,o._)("br",null,null,-1);function y(e,t,s,y,_,q){const v=(0,o.up)("q-btn"),S=(0,o.up)("q-banner"),E=(0,o.up)("q-tab"),W=(0,o.up)("q-tabs"),V=(0,o.up)("q-card-section"),x=(0,o.up)("q-card"),T=(0,o.up)("Split"),k=(0,o.up)("q-tab-panel"),I=(0,o.up)("q-tab-panels"),Z=(0,o.up)("q-checkbox"),U=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(U,null,{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o._)("div",i,[""!==_.errorMessage?((0,o.wg)(),(0,o.j4)(S,{key:0,class:"bg-orange text-white","inline-actions":"",rounded:""},{action:(0,o.w5)((()=>[(0,o.Wm)(v,{flat:"",label:"Dismiss",onClick:q.dismissBanner},null,8,["onClick"])])),default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(_.errorMessage)+" ",1)])),_:1})):(0,o.kq)("",!0)])]),(0,o._)("div",r,[(0,o._)("div",l,[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o.Wm)(W,{modelValue:_.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>_.tab=e),"inline-label":"",dense:"",align:"left",class:"text-teal col"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.transactions,((e,t)=>((0,o.wg)(),(0,o.j4)(E,{name:"split-"+t,label:q.getSplitLabel(t)},null,8,["name","label"])))),256)),(0,o.Wm)(v,{onClick:q.addTransaction,flat:"",label:"Add split",icon:"fas fa-plus-circle",class:"text-orange"},null,8,["onClick"])])),_:1},8,["modelValue"])])])),_:1})])),_:1})])]),(0,o._)("div",d,[(0,o._)("div",c,[(0,o.Wm)(I,{modelValue:_.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>_.tab=e),animated:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.transactions,((e,t)=>((0,o.wg)(),(0,o.j4)(k,{key:t,name:"split-"+t},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{transaction:e,index:t,"transaction-type":_.transactionType,"disabled-input":q.disabledInput,"has-submission-errors":_.hasSubmissionErrors[t],"submission-errors":_.submissionErrors[t],"onUpdate:transaction":q.updateTransaction},null,8,["transaction","index","transaction-type","disabled-input","has-submission-errors","submission-errors","onUpdate:transaction"])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])]),(0,o._)("div",m,[(0,o._)("div",p,[(0,o.Wm)(x,{class:"q-mt-xs",bordered:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o._)("div",b,[(0,o._)("div",h,[(0,o.Wm)(v,{disable:q.disabledInput,color:"primary",label:"Submit",onClick:q.submitTransaction},null,8,["disable","onClick"])])]),(0,o._)("div",g,[(0,o._)("div",f,[(0,o.Wm)(Z,{modelValue:_.doReturnHere,"onUpdate:modelValue":t[2]||(t[2]=e=>_.doReturnHere=e),disable:q.disabledInput,label:"Return here to create another one","left-label":""},null,8,["modelValue","disable"]),w,(0,o.Wm)(Z,{modelValue:_.doResetForm,"onUpdate:modelValue":t[3]||(t[3]=e=>_.doResetForm=e),disable:!_.doReturnHere||q.disabledInput,label:"Reset form after submission","left-label":""},null,8,["modelValue","disable"])])])])),_:1})])),_:1})])])])),_:1})}var _=s(8898),q=s(5115),v=s(1569);class S{post(e){let t="/api/v1/transactions";return v.api.post(t,e)}}const E={class:"row"},W={class:"col"},V={class:"text-h6"},x={class:"row"},T={class:"col q-mb-xs q-pr-sm"},k=(0,o._)("strong",null,"Main info",-1),I={class:"row"},Z={class:"col q-mb-md"},U={class:"row"},D={class:"col-4 q-mb-xs q-pr-xs"},Q={class:"col-4 q-px-xs"},$={class:"col-4 q-pl-xs"},A=(0,o._)("div",{class:"row"},[(0,o._)("div",{class:"col-4 q-pl-xs"}," Optional "),(0,o._)("div",{class:"col-4 q-pl-xs"}," Foreign amount ")],-1),F={class:"col q-mb-xs q-pl-sm"},C=(0,o._)("strong",null,"More meta info",-1),M={class:"row"},O={class:"col q-mb-md"},R={class:"col"},j={class:"row"},B={class:"col q-mb-md"},H={class:"col"},L={class:"row"},P={class:"col q-mb-md"},z={class:"col"},N={class:"row"},K={class:"col"},Y={class:"row"},G={class:"col q-mb-xs q-pl-sm"},J=(0,o._)("strong",null,"More meta info",-1),X=(0,o.Uk)(" Extra opts "),ee={class:"col q-mb-xs q-pl-sm"},te=(0,o._)("strong",null,"Date info",-1),se=(0,o.Uk)(" Date fields ");function oe(e,t,s,a,i,r){const l=(0,o.up)("q-item-label"),u=(0,o.up)("q-item-section"),d=(0,o.up)("q-item"),c=(0,o.up)("q-separator"),m=(0,o.up)("TransactionDescription"),p=(0,o.up)("SourceAccount"),b=(0,o.up)("q-input"),h=(0,o.up)("DestinationAccount"),g=(0,o.up)("q-card-section"),f=(0,o.up)("q-card"),w=(0,o.up)("q-select");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",E,[(0,o._)("div",W,[(0,o._)("div",V,"Info for "+(0,n.zw)(e.$route.params.type)+" "+(0,n.zw)(s.index),1)])]),(0,o._)("div",x,[(0,o._)("div",T,[(0,o.Wm)(f,{bordered:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[k])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o._)("div",I,[(0,o._)("div",Z,[(0,o.Wm)(m,{"submission-error":s.submissionErrors.description,"has-submission-error":s.hasSubmissionErrors.description,"disabled-input":s.disabledInput,description:s.transaction.description,"onUpdate:description":r.updateDescription},null,8,["submission-error","has-submission-error","disabled-input","description","onUpdate:description"])])]),(0,o._)("div",U,[(0,o._)("div",D,[(0,o.Wm)(p,{name:"","onUpdate:source":r.updateSource,"disabled-input":!1,"submission-error":"","transaction-type":s.transactionType,"has-submission-error":!1},null,8,["onUpdate:source","transaction-type"])]),(0,o._)("div",Q,[(0,o.Wm)(b,{modelValue:s.transaction.amount,"onUpdate:modelValue":t[0]||(t[0]=e=>s.transaction.amount=e),disable:s.disabledInput,dense:"",error:s.hasSubmissionErrors.amount,"error-message":s.submissionErrors.amount,label:e.$t("firefly.amount"),"bottom-slots":"",clearable:"","fill-mask":"0",hint:"Expects #.##",mask:"#.##",outlined:"","reverse-fill-mask":""},null,8,["modelValue","disable","error","error-message","label"])]),(0,o._)("div",$,[(0,o.Wm)(h,{name:"","onUpdate:destination":r.updateDestination,"disabled-input":!1,"submission-error":"","transaction-type":s.transactionType,"has-submission-error":!1},null,8,["onUpdate:destination","transaction-type"])])]),A])),_:1})])),_:1})]),(0,o._)("div",F,[(0,o.Wm)(f,{bordered:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[C])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o._)("div",M,[(0,o._)("div",O,[(0,o.Wm)(b,{modelValue:s.transaction.date,"onUpdate:modelValue":t[1]||(t[1]=e=>s.transaction.date=e),dense:"",disable:s.disabledInput,error:s.hasSubmissionErrors.date,"error-message":s.submissionErrors.date,hint:e.$t("firefly.date"),"bottom-slots":"",outlined:"",type:"date"},null,8,["modelValue","disable","error","error-message","hint"])]),(0,o._)("div",R,[(0,o.Wm)(b,{modelValue:s.transaction.time,"onUpdate:modelValue":t[2]||(t[2]=e=>s.transaction.time=e),disable:s.disabledInput,hint:e.$t("firefly.time"),"bottom-slots":"",outlined:"",dense:"",type:"time"},null,8,["modelValue","disable","hint"])])]),(0,o._)("div",j,[(0,o._)("div",B,[(0,o.Wm)(b,{modelValue:s.transaction.category,"onUpdate:modelValue":t[3]||(t[3]=e=>s.transaction.category=e),disable:s.disabledInput,dense:"",error:s.hasSubmissionErrors.category,"error-message":s.submissionErrors.category,label:e.$t("firefly.category"),"bottom-slots":"",hint:"category",clearable:"",outlined:""},null,8,["modelValue","disable","error","error-message","label"])]),(0,o._)("div",H,[(0,o.Wm)(w,{dense:"",modelValue:s.transaction.budget,"onUpdate:modelValue":t[4]||(t[4]=e=>s.transaction.budget=e),clearable:"",outlined:"",hint:"Budget"},null,8,["modelValue"])])]),(0,o._)("div",L,[(0,o._)("div",P,[(0,o.Wm)(w,{modelValue:s.transaction.bill,"onUpdate:modelValue":t[5]||(t[5]=e=>s.transaction.bill=e),disable:s.disabledInput,dense:"",error:s.hasSubmissionErrors.category,"error-message":s.submissionErrors.category,label:e.$t("firefly.bill"),"bottom-slots":"",hint:"bill",clearable:"",outlined:""},null,8,["modelValue","disable","error","error-message","label"])]),(0,o._)("div",z,[(0,o.Wm)(w,{modelValue:s.transaction.piggy,"onUpdate:modelValue":t[6]||(t[6]=e=>s.transaction.piggy=e),disable:s.disabledInput,dense:"",error:s.hasSubmissionErrors.category,"error-message":s.submissionErrors.category,label:e.$t("firefly.piggy"),"bottom-slots":"",hint:"bill",clearable:"",outlined:""},null,8,["modelValue","disable","error","error-message","label"])])]),(0,o._)("div",N,[(0,o._)("div",K,[(0,o.Wm)(b,{modelValue:s.transaction.tags,"onUpdate:modelValue":t[7]||(t[7]=e=>s.transaction.tags=e),disable:s.disabledInput,dense:"",error:s.hasSubmissionErrors.tags,"error-message":s.submissionErrors.category,label:e.$t("firefly.tags"),"bottom-slots":"",hint:"Tags",clearable:"",outlined:""},null,8,["modelValue","disable","error","error-message","label"])])])])),_:1})])),_:1})])]),(0,o._)("div",Y,[(0,o._)("div",G,[(0,o.Wm)(f,{bordered:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[J])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[X])),_:1})])),_:1})]),(0,o._)("div",ee,[(0,o.Wm)(f,{bordered:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[te])),_:1})])),_:1})])),_:1}),(0,o.Wm)(c),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[se])),_:1})])),_:1})])])])}function ne(e,t,s,n,a,i){const r=(0,o.up)("q-input");return(0,o.wg)(),(0,o.j4)(r,{modelValue:s.description,"onUpdate:modelValue":t[0]||(t[0]=e=>s.description=e),hint:" ",dense:"",disable:s.disabledInput,error:s.hasSubmissionError,"error-message":s.submissionError,label:e.$t("firefly.description"),"bottom-slots":"",clearable:"",outlined:"",type:"text"},null,8,["modelValue","disable","error","error-message","label"])}const ae={name:"TransactionDescription",props:{description:{type:String,required:!0},disabledInput:{type:Boolean,default:!1,required:!0},hasSubmissionError:{type:Boolean,default:!1,required:!0},submissionError:{type:String,required:!0}},watch:{description:{handler:function(e){this.$emit("update:description",e)},deep:!0}}};var ie=s(1639),re=s(6611),le=s(9984),ue=s.n(le);const de=(0,ie.Z)(ae,[["render",ne]]),ce=de;ue()(ae,"components",{QInput:re.Z});const me=(0,o.Uk)(" No results ");function pe(e,t,s,a,i,r){const l=(0,o.up)("q-item-label"),u=(0,o.up)("q-item-section"),d=(0,o.up)("q-item"),c=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(c,{modelValue:i.model,"onUpdate:modelValue":t[0]||(t[0]=e=>i.model=e),"use-input":"",options:i.options,onFilter:r.filterFn,dense:"",loading:i.loading,outlined:"","new-value-mode":"add-unique",disable:s.disabledInput,error:s.hasSubmissionError,label:e.$t("firefly.source_account"),"error-message":s.submissionError,"bottom-slots":"",clearable:""},{option:(0,o.w5)((e=>[(0,o.Wm)(d,(0,n.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024),(0,o.Wm)(l,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.type),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"text-grey"},{default:(0,o.w5)((()=>[me])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter","loading","disable","error","label","error-message"])}class be{get(e,t){let s="api/v2/autocomplete/accounts";return v.api.get(s,{params:{types:e,query:t,limit:25}})}}const he={name:"SourceAccount",data(){return{model:null,transactionTypeString:"",options:[],loading:!0}},props:{name:{type:String,required:!0},transactionType:{type:String,required:!1,default:"unknown"},disabledInput:{type:Boolean,default:!1,required:!0},hasSubmissionError:{type:Boolean,default:!1,required:!0},submissionError:{type:String,required:!0}},mounted(){this.getAccounts(""),this.model=this.name},methods:{getAccounts:function(e){this.loading=!0;let t="Asset account,Revenue account,Loan,Debt,Mortgage";"deposit"===this.transactionType&&console.log("NOW DEPOSIT"),(new be).get(t,e).then((e=>{this.stringOptions=[];for(let t in e.data){let s=e.data[t],o={label:s.name,value:s.id,type:s.type};this.stringOptions.push(o)}this.options=this.stringOptions,this.loading=!1}))},filterFn(e,t,s){t((()=>{this.getAccounts(e)}))}},watch:{model:{handler:function(e){void 0!==e&&this.$emit("update:source",e)},deep:!0}}};var ge=s(7887),fe=s(490),we=s(1233),ye=s(3115);const _e=(0,ie.Z)(he,[["render",pe]]),qe=_e;ue()(he,"components",{QSelect:ge.Z,QItem:fe.Z,QItemSection:we.Z,QItemLabel:ye.Z});const ve=(0,o.Uk)(" No results ");function Se(e,t,s,a,i,r){const l=(0,o.up)("q-item-label"),u=(0,o.up)("q-item-section"),d=(0,o.up)("q-item"),c=(0,o.up)("q-select");return(0,o.wg)(),(0,o.j4)(c,{modelValue:i.model,"onUpdate:modelValue":t[0]||(t[0]=e=>i.model=e),"use-input":"",options:i.options,onFilter:r.filterFn,dense:"",loading:i.loading,outlined:"","new-value-mode":"add-unique",disable:s.disabledInput,error:s.hasSubmissionError,label:e.$t("firefly.destination_account"),"error-message":s.submissionError,"bottom-slots":"",clearable:""},{option:(0,o.w5)((e=>[(0,o.Wm)(d,(0,n.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.label),1)])),_:2},1024),(0,o.Wm)(l,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.opt.type),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"text-grey"},{default:(0,o.w5)((()=>[ve])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter","loading","disable","error","label","error-message"])}const Ee={name:"DestinationAccount",data(){return{model:null,transactionTypeString:"",options:[],loading:!0}},props:{name:{type:String,required:!0},transactionType:{type:String,required:!1,default:"unknown"},disabledInput:{type:Boolean,default:!1,required:!0},hasSubmissionError:{type:Boolean,default:!1,required:!0},submissionError:{type:String,required:!0}},mounted(){this.getAccounts(""),this.model=this.name},methods:{getAccounts:function(e){this.loading=!0;let t="Expense account, Loan, Debt, Mortgage";if("deposit"===this.transactionType){}(new be).get(t,e).then((e=>{this.stringOptions=[];for(let t in e.data){let s=e.data[t],o={label:s.name,value:s.id,type:s.type};this.stringOptions.push(o)}this.options=this.stringOptions,this.loading=!1}))},filterFn(e,t,s){t((()=>{this.getAccounts(e)}))}},watch:{model:{handler:function(e){void 0!==e&&this.$emit("update:destination",e)},deep:!0}}},We=(0,ie.Z)(Ee,[["render",Se]]),Ve=We;ue()(Ee,"components",{QSelect:ge.Z,QItem:fe.Z,QItemSection:we.Z,QItemLabel:ye.Z});const xe={name:"Split",components:{DestinationAccount:Ve,SourceAccount:qe,TransactionDescription:ce},props:{index:{type:Number,required:!0},transactionType:{type:String,default:"unknown",required:!0},disabledInput:{type:Boolean,required:!0},hasSubmissionErrors:{type:Object,required:!0},submissionErrors:{type:Object,required:!0},transaction:{type:Object,required:!0}},methods:{updateDescription(e){this.transaction.description=e,console.log('Description is now "'+e+'"')},updateSource(e){this.transaction.source=e,console.log("Source is now:"),console.log(e)},updateDestination(e){this.transaction.destination=e,console.log("Destination is now:"),console.log(e)}},watch:{transaction:{handler:function(e){const t={index:this.index,transaction:e};this.$emit("update:transaction",t)},deep:!0}}};var Te=s(4458),ke=s(926),Ie=s(3190);const Ze=(0,ie.Z)(xe,[["render",oe]]),Ue=Ze;ue()(xe,"components",{QCard:Te.Z,QItem:fe.Z,QItemSection:we.Z,QItemLabel:ye.Z,QSeparator:ke.Z,QCardSection:Ie.Z,QInput:re.Z,QSelect:ge.Z});class De{calculateType(e,t){const s=this.empty(e),o=this.empty(t);if(s&&o)return"unknown";if("object"===typeof e&&null!==e&&o){if("Asset account"===e.type||"Loan"===e.type||"Debt"===e.type||"Mortgage"===e.type)return"withdrawal";if("Revenue account"===e.type)return"deposit"}if("object"===typeof t&&null!==t&&s&&"Asset account"===t.type)return"deposit";if(!s&&!o){if("Asset account"===e.type&&"Expense account"===t.type)return"withdrawal";if(e.type===t.type)return"transfer"}console.error("Cannot handle"),console.log(e),console.log(t)}empty(e){return null===e||""===e||(null===e||"object"!==typeof e)}}const Qe={name:"Create",components:{Split:Ue},data(){return{tab:"split-0",transactionType:"unknown",transactions:[],submissionErrors:[],hasSubmissionErrors:[],submitting:!1,doReturnHere:!1,doResetForm:!1,group_title:"",errorMessage:""}},computed:{disabledInput:function(){return this.submitting??!1}},created(){console.log("Created"),this.resetForm()},methods:{resetForm:function(){console.log("ResetForm"),this.transactions=[],this.addTransaction()},addTransaction:function(){const e=this.getDefaultTransaction();this.transactions.push(e.transaction),this.submissionErrors.push(e.submissionError),this.hasSubmissionErrors.push(e.hasSubmissionError);const t=String(this.transactions.length-1);console.log("AddTransaction "+t),this.tab="split-"+t},getSplitLabel:function(e){return this.transactions.hasOwnProperty(e)&&null!==this.transactions[e].description&&this.transactions[e].description.length>0?this.transactions[e].description:this.$t("firefly.single_split")+" "+(e+1)},dismissBanner:function(){console.log("Dismiss banner"),this.errorMessage=""},submitTransaction:function(){console.log("submit transaction"),this.submitting=!0,this.errorMessage="",this.resetErrors();const e=this.buildTransaction();let t=new S;t.post(e).catch(this.processErrors).then(this.processSuccess)},updateTransaction:function(e){const t=e.index;this.transactions[t]=e.transaction,this.transactionType=(new De).calculateType(this.transactions[0].source,this.transactions[0].destination)},processSuccess:function(e){console.log("process success"),this.submitting=!1;let t={level:"success",text:"I am text",show:!0,action:{show:!0,text:"Go to transaction",link:{name:"transactions.show",params:{id:parseInt(e.data.data.id)}}}};this.$q.localStorage.set("flash",t),this.doReturnHere&&window.dispatchEvent(new CustomEvent("flash",{detail:{flash:this.$q.localStorage.getItem("flash")}})),this.doReturnHere||this.$router.go(-1)},resetErrors:function(){console.log("reset errors");let e=this.transactions.length,t=this.getDefaultTransaction();for(let s=0;s<e;s++)this.submissionErrors[s]=t.submissionError,this.hasSubmissionErrors[s]=t.hasSubmissionError},processErrors:function(e){if(console.log("process errors"),e.response){let t=e.response.data;this.errorMessage=t.message;for(let e in t.errors)t.errors.hasOwnProperty(e)&&this.processSingleError(e,t.errors[e])}this.submitting=!1},processSingleError:function(e,t){console.log("process single error");let s=parseInt(e.split(".")[1]),o=e.split(".")[2];switch(o){case"amount":case"date":case"description":this.submissionErrors[s][o]=t[0],this.hasSubmissionErrors[s][o]=!0;break;case"source_id":case"source_name":this.submissionErrors[s].source=t[0],this.hasSubmissionErrors[s].source=!0;break;case"destination_id":case"destination_name":this.submissionErrors[s].source=t[0],this.hasSubmissionErrors[s].source=!0;break}},buildTransaction:function(){console.log("build transaction");const e={transactions:[]};return this.transactions.forEach((t=>{let s=(0,q.Z)(new Date(t.date+" "+t.time)),o={type:this.$route.params.type,description:t.description,source_name:t.source,destination_name:t.destination,amount:t.amount,date:s};e.transactions.push(o)})),e},getDefaultTransaction:function(){console.log("get default transaction");let e="",t="00:00";return 0===this.transactions.length&&(e=(0,_.Z)(new Date,"yyyy-MM-dd")),{submissionError:{description:"",amount:"",date:"",source:"",destination:""},hasSubmissionError:{description:!1,amount:!1,date:!1,source:!1,destination:!1},transaction:{description:"",date:e,time:t,amount:0,source:"",destination:"",budget:"",category:"",subscription:"",interest_date:"",book_date:"",process_date:"",due_date:"",payment_date:"",invoice_date:""}}}},preFetch(){}};var $e=s(9885),Ae=s(7128),Fe=s(8879),Ce=s(7817),Me=s(900),Oe=s(9800),Re=s(4106),je=s(1221);const Be=(0,ie.Z)(Qe,[["render",y]]),He=Be;ue()(Qe,"components",{QPage:$e.Z,QBanner:Ae.Z,QBtn:Fe.Z,QCard:Te.Z,QCardSection:Ie.Z,QTabs:Ce.Z,QTab:Me.Z,QTabPanels:Oe.Z,QTabPanel:Re.Z,QCheckbox:je.Z})}}]);