"use strict";(globalThis["webpackChunkfirefly_iii"]=globalThis["webpackChunkfirefly_iii"]||[]).push([[1341],{1341:(e,a,t)=>{t.r(a),t.d(a,{default:()=>z});var s=t(9835),n=t(1957);const r={class:"row q-mx-md q-mb-sm"},l={class:"col q-mr-sm"},o={class:"row items-center no-wrap"},i=(0,s._)("div",{class:"col"}," Search and filter ",-1),d={class:"col-auto"},c=(0,s.Uk)(" Here be stuff "),u={class:"col q-ml-sm"},p={class:"row items-center no-wrap"},m=(0,s._)("div",{class:"col"}," Dates and ranges ",-1),g={class:"col-auto"},f=(0,s.Uk)(" Here be stuff "),w={class:"row q-mx-md"},h={class:"col"},_={class:"row items-center no-wrap"},b=(0,s._)("div",{class:"col"}," Stats ",-1),v={class:"col-auto"},y=(0,s.Uk)(" Here be stuff "),W={class:"row"},q={class:"col"},x=(0,s._)("div",{class:"box"},[(0,s._)("div",{class:"row"},[(0,s._)("p",null," "),(0,s._)("p",null," ")])],-1);function E(e,a,t,E,P,k){const R=(0,s.up)("q-btn"),Z=(0,s.up)("q-card-section"),Q=(0,s.up)("q-separator"),S=(0,s.up)("q-slide-transition"),U=(0,s.up)("q-card"),C=(0,s.up)("LargeTable"),N=(0,s.up)("q-fab-action"),F=(0,s.up)("q-fab"),T=(0,s.up)("q-page-sticky"),$=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)($,null,{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",l,[(0,s.Wm)(U,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s._)("div",o,[i,(0,s._)("div",d,[(0,s.Wm)(R,{color:"grey",round:"",flat:"",dense:"",icon:P.searchExpanded?"fas fa-chevron-up":"fas fa-chevron-down",onClick:a[0]||(a[0]=e=>P.searchExpanded=!P.searchExpanded)},null,8,["icon"])])])])),_:1}),(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",null,[(0,s.Wm)(Q),(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[c])),_:1})],512),[[n.F8,P.searchExpanded]])])),_:1})])),_:1})]),(0,s._)("div",u,[(0,s.Wm)(U,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s._)("div",p,[m,(0,s._)("div",g,[(0,s.Wm)(R,{color:"grey",round:"",flat:"",dense:"",icon:P.dateExpanded?"fas fa-chevron-up":"fas fa-chevron-down",onClick:a[1]||(a[1]=e=>P.dateExpanded=!P.dateExpanded)},null,8,["icon"])])])])),_:1}),(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",null,[(0,s.Wm)(Q),(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[f])),_:1})],512),[[n.F8,P.dateExpanded]])])),_:1})])),_:1})])]),(0,s._)("div",w,[(0,s._)("div",h,[(0,s.Wm)(U,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s._)("div",_,[b,(0,s._)("div",v,[(0,s.Wm)(R,{color:"grey",round:"",flat:"",dense:"",icon:P.statsExpanded?"fas fa-chevron-up":"fas fa-chevron-down",onClick:a[2]||(a[2]=e=>P.statsExpanded=!P.statsExpanded)},null,8,["icon"])])])])),_:1}),(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",null,[(0,s.Wm)(Q),(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[y])),_:1})],512),[[n.F8,P.statsExpanded]])])),_:1})])),_:1})])]),(0,s._)("div",W,[(0,s._)("div",q,[(0,s.Wm)(C,{ref:"table",loading:P.loading,page:P.page,rows:P.rows,class:"mb-5","rows-number":P.rowsNumber,"rows-per-page":P.rowsPerPage,title:e.$t("firefly.title_"+this.type),onOnRequest:k.onRequest},null,8,["loading","page","rows","rows-number","rows-per-page","title","onOnRequest"])])]),x,(0,s.Wm)(T,{offset:[18,18],position:"bottom-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{color:"green",direction:"up",icon:"fas fa-chevron-up",label:"Actions","label-position":"left",square:"","vertical-actions-align":"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{to:{name:"transactions.create",params:{type:"transfer"}},color:"primary",icon:"fas fa-exchange-alt",label:"New transfer",square:""},null,8,["to"]),(0,s.Wm)(N,{to:{name:"transactions.create",params:{type:"deposit"}},color:"primary",icon:"fas fa-long-arrow-alt-right",label:"New deposit",square:""},null,8,["to"]),(0,s.Wm)(N,{to:{name:"transactions.create",params:{type:"withdrawal"}},color:"primary",icon:"fas fa-long-arrow-alt-left",label:"New withdrawal",square:""},null,8,["to"])])),_:1})])),_:1})])),_:1})}var P=t(1569);class k{list(e,a,t){let s="api/v1/transactions";return P.api.get(s,{params:{page:a,cache:t,type:e}})}}var R=t(1049),Z=t(3247),Q=t(3555);const S={name:"Index",components:{LargeTable:R.Z},watch:{$route(e){"transactions.index"===e.name&&(this.type=e.params.type,this.page=1,this.triggerUpdate())}},data(){return{loading:!1,rows:[],columns:[{name:"type",label:" ",field:"type",style:"width: 30px"},{name:"description",label:"Description",field:"description",align:"left"},{name:"amount",label:"Amount",field:"amount"},{name:"date",label:"Date",field:"date",align:"left"},{name:"menu",label:" ",field:"menu",align:"left"}],type:"withdrawal",page:1,rowsPerPage:50,rowsNumber:100,store:null,range:{start:null,end:null},searchExpanded:!1,dateExpanded:!1,statsExpanded:!1}},computed:{},created(){this.rowsPerPage=this.getListPageSize,this.store=(0,Q.S)()},mounted(){this.type=this.$route.params.type,null!==this.store.getRange.start&&null!==this.store.getRange.end||this.store.$onAction((({name:e,$store:a,args:t,after:s,onError:n})=>{s((a=>{"setRange"===e&&(this.range=a,this.triggerUpdate())}))})),null!==this.store.getRange.start&&null!==this.store.getRange.end&&(this.range={start:this.store.getRange.start,end:this.store.getRange.end},this.triggerUpdate())},methods:{onRequest:function(e){this.page=e.page,this.triggerUpdate()},formatAmount:function(e,a){return Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(a)},gotoTransaction:function(e,a){this.$router.push({name:"transactions.show",params:{id:1}})},triggerUpdate:function(){if(this.loading)return;if(null===this.range.start||null===this.range.end)return;this.loading=!0;const e=new k,a=new Z.Z;this.rows=[],e.list(this.type,this.page,this.getCacheKey).then((e=>{let t=a.parseResponse(e);this.rowsPerPage=t.rowsPerPage,this.rowsNumber=t.rowsNumber,this.rows=t.rows,this.loading=!1}))}}};var U=t(1639),C=t(9885),N=t(4458),F=t(3190),T=t(8879),$=t(9003),A=t(926),D=t(3388),H=t(9361),L=t(935),I=t(9984),O=t.n(I);const j=(0,U.Z)(S,[["render",E]]),z=j;O()(S,"components",{QPage:C.Z,QCard:N.Z,QCardSection:F.Z,QBtn:T.Z,QSlideTransition:$.Z,QSeparator:A.Z,QPageSticky:D.Z,QFab:H.Z,QFabAction:L.Z})}}]);