"use strict";(globalThis["webpackChunkfirefly_iii"]=globalThis["webpackChunkfirefly_iii"]||[]).push([[5114],{5114:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var o=a(9835),i=a(6970);const n=(0,o.Uk)("Edit"),s=(0,o.Uk)("Delete");function l(e,t,a,l,r,p){const u=(0,o.up)("q-th"),d=(0,o.up)("q-tr"),g=(0,o.up)("router-link"),w=(0,o.up)("q-td"),h=(0,o.up)("q-item-label"),c=(0,o.up)("q-item-section"),m=(0,o.up)("q-item"),f=(0,o.up)("q-list"),b=(0,o.up)("q-btn-dropdown"),k=(0,o.up)("q-table"),y=(0,o.up)("q-fab-action"),q=(0,o.up)("q-fab"),_=(0,o.up)("q-page-sticky"),W=(0,o.up)("q-page"),Z=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,{pagination:r.pagination,"onUpdate:pagination":t[0]||(t[0]=e=>r.pagination=e),columns:r.columns,loading:r.loading,rows:r.rows,title:e.$t("firefly.webhooks"),class:"q-ma-md","row-key":"id",onRequest:p.onRequest},{header:(0,o.w5)((e=>[(0,o.Wm)(d,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.cols,(t=>((0,o.wg)(),(0,o.j4)(u,{key:t.name,props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,o.w5)((e=>[(0,o.Wm)(d,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{key:"title",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{to:{name:"webhooks.show",params:{id:e.row.id}},class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.row.title),1)])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,o.Wm)(w,{key:"menu",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{color:"primary",label:"Actions",size:"sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.j4)(m,{to:{name:"webhooks.edit",params:{id:e.row.id}},clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[n])),_:1})])),_:1})])),_:2},1032,["to"])),[[Z]]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(m,{clickable:"",onClick:t=>p.deleteWebhook(e.row.id,e.row.title)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[s])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[Z]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["pagination","columns","loading","rows","title","onRequest"]),(0,o.Wm)(_,{offset:[18,18],position:"bottom-right"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{color:"green",direction:"up",icon:"fas fa-chevron-up",label:"Actions","label-position":"left",square:"","vertical-actions-align":"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{to:{name:"webhooks.create"},color:"primary",icon:"fas fa-exchange-alt",label:"New webhook",square:""},null,8,["to"])])),_:1})])),_:1})])),_:1})}var r=a(7913),p=a(1569);class u{list(e,t){let a="/api/v1/webhooks";return p.api.get(a,{params:{page:e,cache:t}})}}var d=a(3555);const g={name:"Index",watch:{$route(e){"webhooks.index"===e.name&&(this.page=1,this.updateBreadcrumbs(),this.triggerUpdate())}},data(){return{rows:[],pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:100},loading:!1,columns:[{name:"title",label:"Title",field:"title",align:"left"},{name:"menu",label:" ",field:"menu",align:"right"}],store:null}},computed:{},created(){this.pagination.rowsPerPage=this.getListPageSize,this.store=(0,d.S)()},mounted(){this.triggerUpdate()},methods:{deleteWebhook:function(e,t){this.$q.dialog({title:"Confirm",message:'Do you want to delete webhook "'+t+'"?',cancel:!0,persistent:!0}).onOk((()=>{this.destroyWebhook(e)}))},destroyWebhook:function(e){new r.Z("webhooks").destroy(e).then((()=>{this.store.refreshCacheKey(),this.triggerUpdate()}))},updateBreadcrumbs:function(){this.$route.meta.pageTitle="firefly.webhooks",this.$route.meta.breadcrumbs=[{title:"webhooks"}]},onRequest:function(e){this.page=e.pagination.page,this.triggerUpdate()},triggerUpdate:function(){if(this.loading)return;this.loading=!0;const e=new u;this.rows=[],e.list(this.page,this.getCacheKey).then((e=>{this.pagination.rowsPerPage=e.data.meta.pagination.per_page,this.pagination.rowsNumber=e.data.meta.pagination.total,this.pagination.page=this.page;for(let t in e.data.data)if(e.data.data.hasOwnProperty(t)){let a=e.data.data[t],o={id:a.id,title:a.attributes.title};this.rows.push(o)}this.loading=!1}))}}};var w=a(1639),h=a(9885),c=a(2429),m=a(3532),f=a(1682),b=a(7220),k=a(2045),y=a(3246),q=a(490),_=a(1233),W=a(3115),Z=a(3388),Q=a(9361),P=a(935),U=a(2146),v=a(9984),C=a.n(v);const T=(0,w.Z)(g,[["render",l]]),$=T;C()(g,"components",{QPage:h.Z,QTable:c.Z,QTr:m.Z,QTh:f.Z,QTd:b.Z,QBtnDropdown:k.Z,QList:y.Z,QItem:q.Z,QItemSection:_.Z,QItemLabel:W.Z,QPageSticky:Z.Z,QFab:Q.Z,QFabAction:P.Z}),C()(g,"directives",{ClosePopup:U.Z})}}]);