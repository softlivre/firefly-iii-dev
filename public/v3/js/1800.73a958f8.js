"use strict";(globalThis["webpackChunkfirefly_iii"]=globalThis["webpackChunkfirefly_iii"]||[]).push([[1800],{1800:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var r=t(9835),l=t(6970);const o={class:"row q-mx-md"},i={class:"col-12"},a={class:"row q-mx-md q-mt-md"},n={class:"col-12"},u=(0,r._)("div",{class:"text-h6"},"Info for new rule group",-1),d={class:"row q-mx-md"},c={class:"col-12"},m={class:"row"},b={class:"col-12 text-right"},h={class:"row"},p={class:"col-12 text-right"},f=(0,r._)("br",null,null,-1);function g(e,s,t,g,w,_){const v=(0,r.up)("q-btn"),q=(0,r.up)("q-banner"),E=(0,r.up)("q-card-section"),R=(0,r.up)("q-input"),k=(0,r.up)("q-card"),x=(0,r.up)("q-checkbox"),C=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(C,null,{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r._)("div",i,[""!==w.errorMessage?((0,r.wg)(),(0,r.j4)(q,{key:0,class:"bg-orange text-white","inline-actions":"",rounded:""},{action:(0,r.w5)((()=>[(0,r.Wm)(v,{flat:"",label:"Dismiss",onClick:_.dismissBanner},null,8,["onClick"])])),default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(w.errorMessage)+" ",1)])),_:1})):(0,r.kq)("",!0)])]),(0,r._)("div",a,[(0,r._)("div",n,[(0,r.Wm)(k,{bordered:""},{default:(0,r.w5)((()=>[(0,r.Wm)(E,null,{default:(0,r.w5)((()=>[u])),_:1}),(0,r.Wm)(E,null,{default:(0,r.w5)((()=>[(0,r.Wm)(R,{modelValue:w.title,"onUpdate:modelValue":s[0]||(s[0]=e=>w.title=e),disable:_.disabledInput,error:w.hasSubmissionErrors.title,"error-message":w.submissionErrors.title,label:e.$t("form.title"),"bottom-slots":"",clearable:"",outlined:"",type:"text"},null,8,["modelValue","disable","error","error-message","label"])])),_:1})])),_:1})])]),(0,r._)("div",d,[(0,r._)("div",c,[(0,r.Wm)(k,{class:"q-mt-xs"},{default:(0,r.w5)((()=>[(0,r.Wm)(E,null,{default:(0,r.w5)((()=>[(0,r._)("div",m,[(0,r._)("div",b,[(0,r.Wm)(v,{disable:_.disabledInput,color:"primary",label:"Submit",onClick:_.submitRuleGroup},null,8,["disable","onClick"])])]),(0,r._)("div",h,[(0,r._)("div",p,[(0,r.Wm)(x,{modelValue:w.doReturnHere,"onUpdate:modelValue":s[1]||(s[1]=e=>w.doReturnHere=e),disable:_.disabledInput,label:"Return here to create another one","left-label":""},null,8,["modelValue","disable"]),f,(0,r.Wm)(x,{modelValue:w.doResetForm,"onUpdate:modelValue":s[2]||(s[2]=e=>w.doResetForm=e),disable:!w.doReturnHere||_.disabledInput,label:"Reset form after submission","left-label":""},null,8,["modelValue","disable"])])])])),_:1})])),_:1})])])])),_:1})}var w=t(1569);class _{post(e){let s="/api/v1/rule_groups";return w.api.post(s,e)}}const v={name:"Create",data(){return{submissionErrors:{},hasSubmissionErrors:{},submitting:!1,doReturnHere:!1,doResetForm:!1,errorMessage:"",title:""}},computed:{disabledInput:function(){return this.submitting}},created(){this.resetForm()},methods:{resetForm:function(){this.title="",this.resetErrors()},resetErrors:function(){this.submissionErrors={title:""},this.hasSubmissionErrors={title:!1}},submitRuleGroup:function(){this.submitting=!0,this.errorMessage="",this.resetErrors();const e=this.buildRuleGroup();(new _).post(e).catch(this.processErrors).then(this.processSuccess)},buildRuleGroup:function(){return{title:this.title}},dismissBanner:function(){this.errorMessage=""},processSuccess:function(e){if(!e)return;this.submitting=!1;let s={level:"success",text:"I am new rule group",show:!0,action:{show:!0,text:"Go to piggy",link:{name:"rule-groups.show",params:{id:parseInt(e.data.data.id)}}}};this.$q.localStorage.set("flash",s),this.doReturnHere&&window.dispatchEvent(new CustomEvent("flash",{detail:{flash:this.$q.localStorage.getItem("flash")}})),this.doReturnHere||this.$router.go(-1)},processErrors:function(e){if(e.response){let s=e.response.data;this.errorMessage=s.message,console.log(s);for(let e in s.errors)s.errors.hasOwnProperty(e)&&(this.submissionErrors[e]=s.errors[e][0],this.hasSubmissionErrors[e]=!0)}this.submitting=!1}}};var q=t(1639),E=t(9885),R=t(7128),k=t(8879),x=t(4458),C=t(3190),I=t(6611),S=t(1221),W=t(9984),V=t.n(W);const Z=(0,q.Z)(v,[["render",g]]),y=Z;V()(v,"components",{QPage:E.Z,QBanner:R.Z,QBtn:k.Z,QCard:x.Z,QCardSection:C.Z,QInput:I.Z,QCheckbox:S.Z})}}]);